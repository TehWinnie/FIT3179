{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Deaths by Neoplasms (1990-2019) by Age Group",
  "width": 425,
  "height": 350,
  "projection": { "type": "equalEarth" },
  "data": {
    "url": "js/worldmap.json",
    "format": { "type": "topojson", "feature": "ne_110m_admin_0_countries" }
  },
  "transform": [
    {
      "lookup": "properties.NAME",
      "from": {
        "data": { "url": "data/chocolate_bars.csv" },
        "key": "Entity",
        "fields": [
          "Deaths - Neoplasms - Sex: Both - Age: Under 5 (Rate)",
          "Deaths - Neoplasms - Sex: Both - Age: 5-14 years (Rate)",
          "Deaths - Neoplasms - Sex: Both - Age: 15-49 years (Rate)",
          "Deaths - Neoplasms - Sex: Both - Age: 50-69 years (Rate)",
          "Deaths - Neoplasms - Sex: Both - Age: 70+ years (Rate)"
        ]
      },
      "as": ["Under5", "5-14 years", "15-49 years", "50-69 years", "70+ years"]
    }
  ],
  "layer": [
    {
      "data": {
        "values": [], // Replace with filtered data for this attribute
        "format": { "type": "json" }
      },
      "mark": { "type": "geoshape", "stroke": "black", "strokeWidth": 0.5 },
      "encoding": {
        "color": {
          "field": "5-14 years",
          "type": "quantitative",
          "scale": { "type": "sqrt", "domain": [0, 5000], "range": ["white", "red"] },
          "legend": { "title": "Total Deaths 5-14 years" }
        },
        "tooltip": [
          { "field": "properties.NAME", "type": "nominal", "title": "Country" },
          { "field": "5-14 years", "type": "quantitative", "title": "Total Deaths 5-14 years" }
        ]
      }
    }

  ]
}
